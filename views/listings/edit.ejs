<% layout('/layouts/boilerplate') %>
<body><br><br>
    <div class="col-8 offset-2">
    <h3 style="color: #fe424d;;">Edit this Listings</h3><br>
    <form method="POST" action="/listings/<%=listing._id %>?_method=PUT" novalidate class="needs-validation" enctype="multipart/form-data" >
        <div class="mb-3"> 
            <label for="title" class="form-label"><b>Title</b></label><br>
            <input type="text" name="listing[title]" value="<%=listing.title %>"class="form-control"autocomplete="off" required>
            <div  class="valid-feedback">Title looks good</div>
        </div>
        <div class="mb-3">
            <label for="description" class="form-label"><b>Description</b></label><br>
            <textarea  cols="10" rows="5" name="listing[description]" class="form-control"autocomplete="off" required><%=listing.description%> </textarea>
            <div  class="invalid-feedback">Description should be short</div>
        </div>
        <div class="mb-3">
            original listing Image <br>
            <img src="<%= originalimage %>" alt="" height="200" width="250">
        </div>
        <div class="mb-3">
            <label for="image" class="form-label"><b>upload new image</b></label><br>
            <input type="file" name="listing[image]"autocomplete="off" class="form-control" >
        </div>
        <div class="mb-3">
            <label for="price" class="form-label"><b>Price</b></label><br>
            <input type="number" name="listing[price]" value="<%=listing.price %>" autocomplete="off" class="form-control" required>
            <div  class="invalid-feedback">Enter  Valid  Price</div>
        </div>
        <div class="mb-3">
            <label for="location" class="form-label"><b>Location</b></label><br>
            <input type="text" name="listing[location]" value="<%=listing.location %>" class="form-control" autocomplete="off" required>
            <div  class="invalid-feedback">Please  Enter  Valid  Location</div>
        </div>
        <div class="mb-3">
            <label for="country" class="form-label"><b>Country</b></label><br>
            <input type="text" name="listing[country]" value="<%=listing.country %>" class="form-control" autocomplete="off" required>
            <div  class="invalid-feedback">Please  Enter  Valid  Country  Name</div>
        </div>
        <br>
        <button class="btn btn-dark edit-btn">save Changes</button>
    </form>
</div>
<script>// Example starter JavaScript for disabling form submissions if there are invalid fields
    (function () {
        'use strict'
      
        // Fetch all the forms we want to apply custom Bootstrap validation styles to
        var forms = document.querySelectorAll('.needs-validation')
      
        // Loop over them and prevent submission
        Array.prototype.slice.call(forms)
          .forEach(function (form) {
            form.addEventListener('submit', function (event) {
              if (!form.checkValidity()) {
                event.preventDefault()
                event.stopPropagation()
              }
      
              form.classList.add('was-validated')
            }, false)
          })
      })()</script>
</body>
</html>